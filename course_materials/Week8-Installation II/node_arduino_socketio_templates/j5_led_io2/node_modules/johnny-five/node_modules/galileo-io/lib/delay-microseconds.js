var now = require("performance-now");

function delayMicroseconds(us, calledAt) {
  var start = process.hrtime();
  if (start[1] >= calledAt + (us * 1000)) {
    return;
  }
  while (process.hrtime(start)[1] < us * 1000) {}
}


// var s = process.hrtime();
// console.log(s[1]);

console.log(process.hrtime());
delayMicroseconds(2, process.hrtime());
console.log(process.hrtime());

// var e = process.hrtime(s);
// console.log(e[1]);
//
//
var start = now();
var end = now();
console.log(start.toFixed(3)) // ~ 0.05 on my system
console.log((end-start).toFixed(3)) // ~ 0.002 on my system


